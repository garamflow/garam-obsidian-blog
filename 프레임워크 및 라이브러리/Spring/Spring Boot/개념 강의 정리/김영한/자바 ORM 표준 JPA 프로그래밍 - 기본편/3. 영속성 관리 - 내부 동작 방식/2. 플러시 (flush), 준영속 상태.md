# 1. 플러시 (flush)
- 영속성 컨텍스트의 변경 내용을 데이터베이스에 반영하는 것을 말한다.

## 1) 플러시 발생 흐름
1. 변경을 감지한다.
2. 수정된 엔티티 쓰기 지연 SQL 저장소에 등록한다.
3. 쓰기 지연 SQL 저장소의 쿼리를 데이터베이스에 전송한다. (등록, 수정, 삭제 쿼리)

## 2) 영속성 컨텍스트를 플러시하는 방법
- `em.flush()` : 직접 호출하기
- 트랜잭션 커밋 : 플러시 자동 호출
- JPQL 쿼리 실행 : 플러시 자동 호출

## 3) 플러시는
- 영속성 컨텍스트를 비우지 않는다.
- 영속성 컨텍스트의 변경 내용을 데이터베이스에 동시화한다.
- 트랜잭션이라는 작업 단위가 중요하다.
	- 커밋 직전에만 동기화하면 된다.


# 2. 준영속 상태
- 영속 상태의 엔티티가 영속성 컨테긋트에서 분리된 상태 (detached)
- 영속성 컨텍스트가 제공하는 기능을 사용하지 못한다.

## 준영속 상태로 만드는 방법
- `em.detach(entity)`
	- 특정 엔티티만 준영속 상태로 전환한다.
- `em.clear()`
	- 영속성 컨텍스트를 완전히 초기화한다.
- `em.close()`
	- 영속성 컨텍스트를 종료한다.