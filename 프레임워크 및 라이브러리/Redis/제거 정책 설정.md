# 제거 정책 설정
메모리 사용량이 `maxmemory` 지시자로 설정된 값에 도달하면, 레디스는 메모리 확보를 위해 키를 제거한다. 이때 제거 방식은 `maxmemory-policy` 지시자로 설정된 정책에 따라 결정된다.
캐시 서버나 데이터 저장소 등 용도와 상관없이 이 정책을 설정하는 것이 좋으며, `maxmemory-policy` ㅈ시자를 통해 설정할 수 있다. 캐시 서버로 사용하는 경우, 아래와 같은 정책 중 선택할 수도 있다.

- TTL이 설정된 키를 대상으로 하는 `volatile-` 로 시작하는 정책을 선택
- 데이터 저장소로도 사용하는 경우, 모든 키를 대상으로 하는 `allkeys-` 로 시작하는 정책을 선택

단, 메모리 제거는 TTL을 통한 만료 처리 방식과 비교하면 처리 비용이 더 클 수 있다. 그러므로 키에 TTL을 설정할 수 있는지를 먼저 확인하는 것이 좋다.

| 정책              | 상세                                            |
| --------------- | --------------------------------------------- |
| noeviction      | 오류를 반환하고 어떤 키도 삭제하지 않는다.                      |
| volatile-random | TTL이 설정돈 키 중 임의로 키를 선택해 삭제한다.                 |
| allkeys-random  | 모든 키 중 임의로 키를 선택해 삭제한다.                       |
| volatile-lfu    | TTL이 설정된 키 중 가장 최근에 사용되지 않은 키(LRU)를 선택해 삭제한다. |
| allkeys-lru     | 모든 키 중 가장 최근에 사용되지 않은 키를 선택해 삭제한다.            |
| volatile-ttl    | TTL이 설정된 키 중 남은 TTL이 가장 짧은 키를 선택해 삭제한다.       |
| volatile-lfu    | TTL이 설정된 키 중 가장 적게 사용된 키(LFU)를 선택해 삭제한다.      |
| allkeys-lfu     | 모든 키 중 가장 적게 사용된 키를 선택해 삭제한다.                 |

이런 정책들은 `redis.conf` 파일이나 `CONFIG SET` 명령을 통해 설정할 수 있다.
```bash
CONFIG SET maxmemory-policy allkeys-lru
```
