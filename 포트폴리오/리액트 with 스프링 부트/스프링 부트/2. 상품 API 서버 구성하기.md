# 상품 API 서버 구성하기
## 1) 업로드 설정하기
- 업로드에 관한 설정을 해주려면 `application.yml`에 추가적인 설정이 필요하다.
```yml
...
servlet:  
  multipart:  
    max-request-size: 30MB  
    max-file-size: 10MB
...

org:
  shopplingmall:
    upload:
      path: upload
```
- 파일 사이즈, 한 번에 받아들일 수 있는 양 등을 설정할 수 있다.
	- `max-file-size: 10MB`
		- multipart로 파일을 올릴 때, 한 파일의 사이즈가 10MB를 넘을 수 없다.
- 업로드는 폴더를 만들어 사용할 수도 있지만 별도의 서버를 만들어서 사용하는게 좋다.
- 현재는 따로 폴더를 만들어서 사용할 예정이다.
	- 나중에 nginx 와 같은 서버로 분리시켜주는 것을 추천한다.

## 2) ProductDTO 만들어주기
- DTO는 어떤 용도를 사용할 것인지 생각해야한다.
- `ProductDTO`는 상품 등록 및 조회할 때 사용할 예정이다.
	- 상품 등록 시, multipartFile이라고 업로드 파일을 처리해야하고
	- 상품 조회 시, 데이터베이스에 파일을 저장하면 안된다. 왜냐하면 DB는 많이 써서 속도도 느리고 성능도 효율적이지 않기 때문이다.
		- 조회 시에는 파일의 이름만 들어갈 것이다.
```java
package org.mall.shoppingmallapi.dto;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;
import org.springframework.web.multipart.MultipartFile;

import java.util.ArrayList;
import java.util.List;

@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class ProductDTO2 {
    private Long pno;

    private String pname;
    private int price;
    private String pdesc;

    // 실제로는 삭제하지 않고 플래그를 통해 삭제된 것 처럼 보여주게 하는 것
    private boolean delFlag;

    // 파일
    @Builder.Default
    private List<MultipartFile> files = new ArrayList<>();

    // 이미 데이터베이스에 올라가있는 파일 이름을 갖고올 때 사용
    @Builder.Default
    private List<String> uploadedFileName = new ArrayList<>();
}
```

## 3) 파일 업로드 처리하기

```java

```