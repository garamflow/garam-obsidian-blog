# 이미지가 포함된 목록 처리하기
- 목록에서 주의해야 할 점이, 상품과 이미지를 같이 갖고와야되는 부분이다.
- 상품 10개짜리 리스트 하나를 갖고 온다고 치면 한 세트를 갖고 올 때 한 번, 상품 하나씩 읽어오는데 한 번씩 총 10번의 쿼리를 날리게 되면 DB가 바로 뻗을 수 있다.
- 그래서 `@ElementCollection`과 `Join`을 적절히 사용해줘야한다.
```java
// ProductRepository

@Query("select p, pi from Product p left join p.imageList pi where pi.ord = 0 and p.delFlag = false")
Page<Object[]> selectList(Pageable pageable);
```

### 테스트 코드
```java
@Test
public void testList() {
    Pageable pageable = PageRequest.of(0, 10, Sort.by("pno").descending());

    Page<Object[]> result = productRepositoryTwo.selectList(pageable);

    result.getContent().forEach(arr -> log.info(Arrays.toString(arr)));
}
```