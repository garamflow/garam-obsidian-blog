# 파일 업로드 기능 구현하기
## 1) 경로 초기화 및 폴더 생성
- 파일 업로드 기능에 사용할 장소가 필요하므로 경로 설정 및 폴더 생성을 해줘야한다.
```java
package org.mall.shoppingmallapi.util;

import jakarta.annotation.PostConstruct;
import lombok.RequiredArgsConstructor;
import lombok.extern.log4j.Log4j2;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;
import org.springframework.web.multipart.MultipartFile;

import java.io.File;
import java.util.List;

@Component
@Log4j2
@RequiredArgsConstructor
public class CustomFileUtil {

    // 업로드 경로 초기화
    @Value("${org.shoppingmall.upload.path}")
    private String uploadPath;

    // 폴더 만들어주는 용도
    @PostConstruct
    public void init() {
        File tempFolder = new File(uploadPath);
        if(!tempFolder.exists()) {
            tempFolder.mkdir();
        }

        uploadPath = tempFolder.getAbsolutePath();
    }
}
```

## 2) 파일 업로드 기능 구현하기
```java
...
public List<String> saveFiles(List<MultipartFile> files) throws RuntimeException {
    // 파일이 없거나 비어있으면 비어있는 리스트 반환
    if(files == null || files.size() == 0) {
        return List.of();
    }

	// 업로드된 파일 이름을 저장할 리스트
    List<String> uploadNames = new ArrayList<>();

	// 파일 저장 로직
    for(MultipartFile file: files) {
	    // 파일 이름 중복 방지를 위해 원본 이름 앞에 UUID를 붙인다.
        String savedName = UUID.randomUUID().toString() + "_" + file.getOriginalFilename();

		// 파일을 저장할 경로를 생성한다.
        Path savePath = Paths.get(uploadPath, savedName);

		// 파일을 저장한다.
        try {
	        // 원본 파일 업로드
	        // 파일의 입력 스트림으로부터 데이터를 읽어서 경로에 파일을 생성한다.
            Files.copy(file.getInputStream(), savePath);
            // 파일 저장 성공 시, 생성된 파일 이름을 리스트에 추가한다.
            uploadNames.add(savedName);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    return uploadNames;
}
```