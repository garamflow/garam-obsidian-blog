# 2. 인가코드 받기
## 1) 시크릿 키 생성하기
- 예전과 다르게 비즈니스 앱이 아닌 이상 이제 더이상 이메일을 수집할 수 없다.
- 또한 서버쪽에서 인증을 하려면 시크릿 키가 필요하다.
	- 카카오 로그인 - 보안
		- Client Secret 코드 생성
		- 해당 코드도 저장해둬야한다.

## 2) 카카오 API 만들기
- https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#request-code
- 인가코드를 받기 위한 API를 만들어줘야한다.
- `src/api/kakaoApi.js`
```javascript
const rest_api_key = '65d83e5fb18d7e1d70261b25b146d995';
const redirect_uri = 'http://localhost:3000/member/kakao';
const auth_code_path = 'https://kauth.kakao.com/oauth/authorize'

export const getKakaoLoginLink = () => {
  const kakaoURL = `${auth_code_path}?client_id=${rest_api_key}&redirect_uri=${redirect_uri}&response_type=code`;

  return kakaoURL;
};
```

## 3) 카카오 로그인 컴포넌트 구현
```javascript
import React from 'react';
import { getKakaoLoginLink } from '../../api/kakaoApi';
import { Link } from 'react-router-dom';

const link = getKakaoLoginLink();

const KaKaoLoginComponent = () => {
  return (
    <div className="flex flex-col">
      <div className="text-center text-blue-500">로그인 시 자동 가입처리 됩니다.</div>
      <div className="flex justify-center w-full">
        <div className="text-3xl text-center m-6 text-white font-extrabold w-3/4 bg-yellow-500 shadow-sm rounded p-2">
          <Link to={link}>KAKAO LOGIN</Link>
        </div>
      </div>
    </div>
  );
}

export default KaKaoLoginComponent;
```

## 4) 로그인 컴포넌트에 카카오 로그인 컴포넌트 추가하기
```javascript
      ...
      <div className="flex justify-center">
        <div className="relative mb-4 flex w-full justify-center">
          <div className="w-2/5 p-6 flex justify-center font-bold">
            <button
              className="rounded p-4 w-36 bg-blue-500 text-xl text-white"
              onClick={handleClickLogin}
            >
              LOGIN
            </button>
          </div>
        </div>
      </div>
      <KaKaoLoginComponent />
    </div>
  );
}

export default LoginComponent;
```

## 5) 인가코드 확인하기
- 현재 구현된 카카오 로그인 컴포넌트를 통해서 카카오 로그인을 해서 URL을 확인해보자.
- `localhost:3000/member/kakao?code=...`
	- 이런식으로 `code=...`가 붙어있는데 해당 코드가 인가코드이다.
	- 해당 코드를 통해 Access Token을 얻을 수 있다.
	- 또한 해당 코드를 받아주는 페이지도 만들어줘야한다.

## 6) 인가코드 받는 페이지 만들기
- 해당 인가코드를 받는 아주 잠깐 들르는 페이지를 생성해주고 라우터에도 등록시켜주자.
```javascript
import React from 'react';
import { useSearchParams } from 'react-router-dom';

const KaKaoRedirectPage = () => {
  const { searchParams } = useSearchParams();
  const authCode = searchParams.get('code');

  return (
    <div>
      <div>KaKao Login Redirect</div>
      <div>{authCode}</div>
    </div>
  );
}

export default KaKaoRedirectPage;
```

```javascript
	...
    {
      path: 'kakao',
      element: <Suspense fallback={Loading}><KakaoRedirect /></Suspense>
    }
  ]
}

export default memberRouter;
```