# 쿠키를 이용한 로그인 유지
## 1) 리액트 쿠키 설치하기
- 리액트가 SPA이기 때문에 새로고침 하는 순간 로그인 상태가 풀려버린다.
- 브라우저 내에서 연속적으로 상태를 유지시키게 해줘야한다.
- 쿠키, 세션 스토리지, 로컬 스토리지를 이용하면 되는데 보통 로컬 스토리지, 쿠키를 이용한다.
	- 쿠키가 상대적으로 보안상 좋으므로 쿠키를 사용한다.
- `react-cookie` 라이브러리를 설치해주자.
```shell
npm install react-cookie
```

## 2) 리액트 쿠키 설정하기
- 쿠키에 관한 함수들을 따로 구현해주자.
- `src/util/cookieUtil.js`를 만들어주자.
```javascript
import { Cookies } from 'react-cookie';

const cookies = new Cookies();

export const setCookie = (name, value, days) => {
  const expires = new Date();
  expires.setUTCDate(expires.getUTCDate() + days); //보관기한
  return cookies.set(name, value, { path: '/', expires: expires });
};

export const getCookie = (name) => {
  return cookies.get(name);
};

export const removeCookie = (name, path = '/') => {
  cookies.remove(name, { path });
};
```

## 3) 로그인 시 쿠키 저장 구현
- 로그인 시, 메모리와 쿠키 모두에 저장을 하게 해준다.
```javascript
  ...
  extraReducers: (builder) => {
    builder.addCase(loginPostAsync.fulfilled, (state, action) => {
      console.log('fulfilled');
      const payload = action.payload;

      if (!payload.error) {
        setCookie('member', JSON.stringify(payload), 1);
      };

      return payload;
    })
      .addCase(loginPostAsync.pending, (state, action) => {
        console.log('pending');
      })
      .addCase(loginPostAsync.rejected, (state, action) => {
        console.log('rejected');
      })
  }
});
```