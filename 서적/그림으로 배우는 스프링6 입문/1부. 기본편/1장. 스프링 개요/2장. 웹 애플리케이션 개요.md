# 2장 웹 애플리케이션 개요
## 2.1 웹 애플리케이션이란?
- 브라우저를 이용해 조작하는 애플리케이션을 말한다.
	- 아마존, 페이스북, 구글 등

1. 브라우저와 AP 서버가 HTTP로 통신하고 AP 서버가 애플리케이션 처리를 호출한다.
2. 업무에 필요한 데이터는 데이터베이스에 저장되고, 애플리케이션은 데이터베이스에서 데이터를 가져오거나 저장한다.
3. 애플리케이션 요청에 따라 처리를 수행한 후 결과를 HTTP 응답으로 브라우저에 반환한다.
4. 브라우저는 HTML로 화면을 구성한다.
	- HTML을 어디에서 작성하냐에 따라 크게 MPA와 SPA 두 가지로 구분한다.

## 2.2 MPA
- MPA (Multi Page Application)는 요청할 때 마다 브라우저가 화면을 다시 로드하므로 Multi Page라고 표현한다.

1. 요청이 있을 때마다 서버에서 HTML을 생성하고, 생성된 HTML을 응답으로 반환한다.
2. 브라우저는 응답으로 돌아온 HTML을 읽어 화면에 표시한다.
3. 서버에서 작동하는 애플리케이션 자체가 웹 애플리케이션이 된다.

## 2.3 SPA
- SPA (Single Page Application)은 브라우저 첫 화면만 로드하므로 Single Page라고 표현한다.
- 브라우저가 페이지를 매번 다시 불러오지 않아서 화면이 매끄럽게 갱신된다.
	- UX 적으로 향상된다.

1. 최초 페이지는 웹 서버에 준비된 HTML을 다운로드해서 보여준다.
	- 자바스크립트 애플리케이션을 함께 다운로드한다.
2. 자바스크립트 애플리케이션이 HTML을 생성해서 화면을 다시 구성한다.
	- 엄밀히 말해서 HTML의 DOM (Document Object Model)을 생성한다.
3. 화면에 필요한 데이터는 웹 서비스에서 가져온다.
	- 여기서는 웹 서비스를 클라이언트에 대한 응답으로 데이터 자체를 반환하는 애플리케이션을 말한다.
4. 웹 서비스와 자바사크립트 애플리케이션이 한 세트로 웹 애플리케이션이 된다.

## 2.4 프로그램의 역할
- 웹 애플리케이션을 구성하는 프로그램은 역할별로 구분된다.

### 1) 역할별 구분
- Controller
	- 요청을 받아 업무 로직을 호출하고, 적절한 View를 호출하기까지의 전체 처리 흐름을 제어한다.
- View
	- 동적 데이터를 삽입하면서 HTML을 생성한다.
	- 동적 데이터로는 데이터베이스에서 검색한 데이터 등이 있다.
- Service
	- 업무 로직을 처리한다.
	- 예를 들어, 재고 수량을 확인해 재고가 충분하면 주문 데이터를 생성하고 부족하면 예외를 발생시키는 등의 처리를 한다.
- Repository
	- 데이터베이스에 접속해 데이터를 가져오거나 저장한다.
- Entity
	- 업무 데이터를 가진다.
	- 데이터베이스의 테이블이 이미 존재할 때는 테이블과 짝을 이루어 생성하는 경우가 많다.
	- 상품 테이블에 대해 Product 클래스를 Entity 클래스로 생성하는 식이다.
- Input
	- 사용자가 입력한 정보를 가진다.

### 2) 역할 간 호출 관계에 대해
1. Controller 객체가 Service 객체를 호출하고, Service 객체가 Repository 객체를 호출한다.
2. HTML을 생성하는 View 객체는 Controller 객체가 호출한다.
	- 직접 메소드를 호출하는 것이 아니라 선택하는 형식이다.
3. 업무 데이터를 가진 Entity 객체와 사용자가 입력한 정보를 가진 Input 객체는 호출 시 인수나 반환값 등으로 사용된다.
	- 모든 역할에서 이 두 객체를 사용한다.
4. 호출 방향이 한 방향으로 되어 있다.
	- 한 방향으로 만들면 프로그램 변경 시, 영향의 범위를 국지적으로 줄일 수 있다.
	- Service 클래스 변경 시, Service 클래스를 호출하는 Controller 클래스뿐이므로 영향을 받는 게 Controller 클래스 하나로 끝난다.

## 2.5 처리 흐름
1. 브라우저가 보낸 요청을 Controller 객체가 받아서 Service 객체의 업무 로직을 호출한다.
2. 업무 로직에서 Repository 객체의 메소드를 호출하고, Repository 객체는 데이터베이스에 SQL을 실행한다.
3. Repository 객체는 가져온 데이터를 Entity 객체롤 변환하고, 변환한 Entity 객체를 Service 객체에 반환한다.
4. Service 객체는 반환받은 Entity 객체는 Controller 객체에 반환한다.
5. Controller 객체는 HTML을 생성하기 위해 View 객체를 호출하는데, 이대 Entity 객체를 View 객체에 넘겨준다.
6. View 객체는 전달받은 Entity 객체의 내용을 포함하여 HTMl을 생성하고 브라우저에 응답으로 반환한다.