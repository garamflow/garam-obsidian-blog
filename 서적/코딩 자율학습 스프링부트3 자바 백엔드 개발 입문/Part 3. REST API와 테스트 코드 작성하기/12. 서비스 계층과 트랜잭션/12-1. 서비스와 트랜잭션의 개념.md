# 12-1. 서비스와 트랜잭션의 개념
## 1) 서비스 계층 (Service Layer)
- 서비스(Service)란 컨트롤러와 리파지터리 사이에 위치하는 계층으로, 서버의 핵심 기능(비즈니스 로직)을 처리하는 순서를 총괄한다.
- 예시)
	- 식당에서 웨이터는 컨트롤러, 주방장은 서비스, 보조 요리사는 리파지터리로 볼 수 있다.
	- 클라이언트(손님)이 음식을 주문하면 웨이터(컨트롤러)가 이를 받아 주방장(서비스)에게 전달하고, 주방장(서비스)은 레시피에 따라 요리한다. 요리에 필요한 재료(데이터)는 보조 요리사(리파지터리)가 창고(DB)에서 가져온다.
![컨트롤러-서비스-리파지터리 관계](/media/서적/코딩%20자율학습%20스프링부트3%20자바%20백엔드%20개발%20입문/Part%203.%20REST%20API와%20테스트%20코드%20작성하기/12.%20서비스%20계층과%20트랜잭션/컨트롤러-서비스-리파지터리%20관계.png)

## 2) 트랜잭션 (Transaction)
- 트랜잭션이란 모두 성공해야 하는 일련의 과정을 의미한다.
- 쪼갤 수 없는 엄무 처리의 최소 단위이다.
- 트랜잭션이 실패로 돌아갈 경우 진행 초기 단계로 돌리는 것을 **롤백(Rollback)** 이라고 한다.
![트랜잭션의 개념](/media/서적/코딩%20자율학습%20스프링부트3%20자바%20백엔드%20개발%20입문/Part%203.%20REST%20API와%20테스트%20코드%20작성하기/12.%20서비스%20계층과%20트랜잭션/트랜잭션의%20개념.png)
![트랜잭션 실행과 롤백](/media/서적/코딩%20자율학습%20스프링부트3%20자바%20백엔드%20개발%20입문/Part%203.%20REST%20API와%20테스트%20코드%20작성하기/12.%20서비스%20계층과%20트랜잭션/트랜잭션%20실행과%20롤백.png)

## 3) 지금까지의 컨트롤러
- 지금까지 만들었던 컨트롤러는 간단하기에 1인 2역을 수행했었다.
- 하지만 일반적으로 웹 서비스는 컨트롤러와 리파지터리 사이에 서비스 계층을 두어 역할을 분업하게 된다.
![1인 2역의 컨트롤러](/media/서적/코딩%20자율학습%20스프링부트3%20자바%20백엔드%20개발%20입문/Part%203.%20REST%20API와%20테스트%20코드%20작성하기/12.%20서비스%20계층과%20트랜잭션/1인%202역의%20컨트롤러.png)