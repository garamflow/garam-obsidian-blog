# 2. 서버와 브라우저
- 웹 서버에 접속할 수 있는 웹 브라우저는 HTTP라는 프로토콜을 통해 서로 통신한다.

## 1) `www.google.com`에 접속하면 생기는 일
### (1) DNS 서버 조회
- 네트워크상에서 클라이언트가 서버를 찾아가려면 IP주소를 알아야하지만, 구글의 웹 서버 IP 주소가 아니라 도메인 네임(이름)만 알고 있다.
- 인터넷에서 이러한 도메인 네임을 IP 주소로 변경해 주는 **DNS(Domain Name System)** 가 있다.
	- DNS도 애플리케이션 서비스이다.

#### 윈도우 프롬프트에서 테스트해보기
- 명령 프롬프트를 열고 `nslookup www.google.com` 을 입력한다.
- 명령어의 결과 첫 번째 줄에 나온 서버 이름이 이용하고 있는 DNS 서버이다.
- 그 아래에 있는 Addresses 영역의 숫자가 연결된 IP 이다.
- 즉, DNS 서버가 제공한 `www.google.com`에 대응되는 구글 웹 서버의 IP 주소이다.

![클라이언트가 DNS 서버를 조회하는 과정](/media/서적/이것이%20취업을%20위한%20백엔드%20개발이다%20with%20자바/Part%2002.%20백엔드%20개발을%20위한%20필수%20기본%20지식/Chapter%2004.%20서버와%20클라이언트/클라이언트가%20DNS%20서버를%20조회하는%20과정.png)

### (2) 라우터 접속
- 구글 웹 서버 IP를 가지고 출발한 클라이언트 요청을 PC에 연결된 랜선이나 와이파이 전파를 타고 공유기를 거쳐 인터넷 구간을 지난다.
- 인터넷은 KT 등 인터넷 사업자들에 의해 관리되며 회선 중간마다 라우터가 존재한다.
- 라우터는 클라이언트의 요청에 적혀 있는 IP 주소를 기반으로 다음 경로를 안내해준다.
	- 일반적으로 국내에서 서비스 중인 웹 서버에 접근할 때는 3~15개의 라우터를 거친다.

![클라이언트의 요청이 공유기와 라우터를 거치는 과정](/media/서적/이것이%20취업을%20위한%20백엔드%20개발이다%20with%20자바/Part%2002.%20백엔드%20개발을%20위한%20필수%20기본%20지식/Chapter%2004.%20서버와%20클라이언트/클라이언트의%20요청이%20공유기와%20라우터를%20거치는%20과정.png)


> Note
> - DNS 요청을 포함해 클라이언트의 모든 요청은 공유기를 통해 라우터를 거친다.
> - 위 그림은 DNS가 공유기를 거치지 않는 것처럼 표현했찌만, DNS 역시 구글의 웹 서버처럼 공유기를 통해 접근하는 존재이다.

### (3) HTML 문서 전달
- 라우터의 안내를 받아 구글 웹 서버에 도달한 클라이언트의 요청은 구글의 웹 서버에서 실행 중인 웹 서버 애플리케이션에 전달된다.
- 애플리케이션은 클아이언트의 요청에 해당하는 HTML 문서를 응답으로 주고, 문서는 왔던 길을 되돌아가 클아이언트(웹 브라우저)에게 전달된다.

![구글 웹 서버로부터 받은 HTML 문서가 클라이언트에 전달되는 과정](/media/서적/이것이%20취업을%20위한%20백엔드%20개발이다%20with%20자바/Part%2002.%20백엔드%20개발을%20위한%20필수%20기본%20지식/Chapter%2004.%20서버와%20클라이언트/구글%20웹%20서버로부터%20받은%20HTML%20문서가%20클라이언트에%20전달되는%20과정.png)

### (4) 웹 브라우저의 역할
- 웹 서버 애플리케이션으로부터 받은 HTML 문서뿐만 아니라 이미지, 동영상 파일 등 다양한 요소를 종합하여 사용자들에게 보여 주고, 사용자는 모든 리소스가 포함되어 있는 완성된 웹 페이지를 보게 된다.
- 서버로 부터 전달받은 HTML 문서를 사용자가 볼 수 있는 형태로 만드는 과정을 **렌더링(Rendering)** 이라고 한다.
- 웹 브라우저가 하는 일은 다음과 같다.
	- 사용자가 도메인 네임을 입력하면 DNS를 통해 IP 주소로 변환된다.
	- 사용자의 액션에 따라 웹 애플리케이션 서버로 요청을 보낸다.
	- 사용자가 보낸 요청에 대한 응답을 받아 웹 페이지 화면에 렌더링한다.

### (5) 요청과 응답
- 요청(Request)이란 구체적으로 웹 브라우저가 웹 서버에게 HTML 문서를 달라고 요청하는 것이다.
- 응답(Response)이란 HTTP 요청을 받은 웹 서버가 요청에 해당하는 HTML 문서를 주는 것이다.
- 주고 받는 것은 HTML 문서만이 아니라 문자열, 이미지, 동영상 파일, JSON 데이터 등 다양하다.
- 실패 시에는 에러에 해당하는 응답을 돌려주기도 한다.

## 2) IP 주소
- 네트워크는 IP 주소라는 4개의 숫자 조합을 통해서 위치를 식별한다.

### (1) IP 주소의 구성
- IP 주소는 마침표를 기준으로 구분한 4개의 숫자 조합으로 구성된다.
- 각 구역의 숫자는 0~255사이의 숫자로, 0.0.0.0 ~ 255.255.255.255 까지 존재할 수 있다.
	- 이론적으로는 256^4인 43억 개 정도 된다.
	- 단, 특별한 의미로 사용되는 IP 주소도 일부 존재한다.
- 전 세계 인터넷에 연결된 모든 곳에서 접속할 수 있는 유일한 IP는 **공인(Public) IP 주소**로 부여하고, 각각의 공인 IP 내부에 존재하는 네트워크 망에는 **사설(Private) IP 주소**를 부여하는 방식을 사용한다.

![공인 IP 주소와 사설 IP 주소](/media/서적/이것이%20취업을%20위한%20백엔드%20개발이다%20with%20자바/Part%2002.%20백엔드%20개발을%20위한%20필수%20기본%20지식/Chapter%2004.%20서버와%20클라이언트/공인%20IP%20주소와%20사설%20IP%20주소.png)

### (2) IP 주소 확인 방법
- 공인 IP 주소를 확인하는 것은 네이버에 접속해 검색창에 "IP 주소"라고 검색하면 현재 네트워크 망의 공인 IP 주소를 알려 준다.
- 사설 IP 주소를 확인하려면 명령 프롬프트를 열고 "ipconfig"라고 입력하면 여러 IP 주소가 나타나는데, 보통 "192.168.X.X"인 주소가 자신이 사용하는 네트워크 망의 사설 IP 주소이다.
- 사설 IP 외에도 특별한 용도로 사용되는 **로컬호스트(localhost)** 라는 호스트 이름도 있다.
	- 범위는 IPv4기준으로 127.0.0.1~127.255.255.254이며, 네트워크상에서 "자기 자신"을 의미한다.
	- 일반적으로는 127.0.0.1을 사용한다.
- 같은 공유기의 와이파이에 연결된 스마트폰, 노트북 등의 공인 IP 주소를 확인해도 같은 IP 주소가 나온다.
	- 클라이언트의 요청이 공유기를 통해 나간다는 말을 이해할 수 있다.
	- 반대로 공유기 바깥에서는 **포트 포워딩(Port Forwarding)** 을 통해 내부에 있는 노트북이나 스마트폰으로 접근할 수 있다.

> IPv4와 IPv6
> - IP 주소의 빠른 고갈로 새로운 IP 주소 체계의 필요성이 대두되어서 차세대 버전으로 IPv6방식이 등장했다.
> - 기존에는 4개의 마침표로 구분되는 IP 주소 체계를 IPv4라고 하는데, v4는 2^32인 32개의 비트(bit)로 IP 주소를 나타냈다.
> - 반면 v6는 2^128, 즉 128개의 비트로 IP 주소를 나타내서 당연히 더 많은 조합의 IP 주소를 만들 수 있다.
> - 현재까지는 v4가 지배적으로 사용되지만 점차 v6도 활성활될 것이다.

## 3) 포트 (Port)
- 