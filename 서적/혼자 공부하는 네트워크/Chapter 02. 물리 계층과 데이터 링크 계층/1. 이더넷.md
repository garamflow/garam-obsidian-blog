# 1. 이더넷
## 1.0 시작하기 전에
- **물리 계층**과 **데이터 링크 계층**은 서로 밀접하게 연관되어 있다.
- **이더넷**(Ethernet)은 현대 LAN, 특히 유선 LAN 환경에서 가장 대중적으로 사용되는 기술이다.
- 케이블끼리 정보를 주고받으려면 **케이블**과 같은 통신 매체가 필요하다.

## 1.1 이더넷 표준
- 오늘날 유선 LAN 환경은 대부분 이더넷을 기반으로 구성되어, 물리 계층에서는 이더넷 규격 케이블을 사용하고 데이터 링크 계층에서 주고받는 프레임은 이더넷 프레임의 형식을 따른다.
- 이더넷 관련 기술을 **IEEE 802.3**이라는 이름으로 표준화되었다.
- 물론 새로운 이더넷 표준들도 계속 만들어지고 있다.

## 1.2 통신 매체 표기 형태
- 보통 "==전송 속도==BASE-**추가 특성**" 이라는 형태로 표현한다.

### 1.2.1 전송 속도(data rate)
- 숫자만 표기되어 있으면 Mbps 속도, 숫자 뒤에 G가 붙는 경우는 Gbps 속도를 의미한다.
	- 100Base-T 케이블 -> 100Mbps 속도 지원
	- 10GBASE-T 케이블 -> 10Gbps 속도 지원

### 1.2.2 BASE(BASEband)
- 변조 타입(modulation type)을 의미한다.
	- 비트 신호로 변환된 데이터를 통신 매체로 전송하는 방법을 의미한다.
- 일반적인 LAN 환경에서는 대부분 디지털 신호를 송수신하는 베이스밴드 방식을 사용한다.

### 1.2.3 추가 특성(additional distinction)
- 통신 매체의 특성을 명시한다.
- 전송 가능한 최대 거리, 물리 계층 인코딩 방식, 레인 수 등이 명시된다.
	- 물리 계층 인코딩 방식: 데이터가 비트 신호로 변환되는 방식을 의미한다.
	- 레인 수: 비트 신호를 옮길 수 있는 전송로 수를 의미한다.

## 1.3 통신 매체 종류

| 추가 특성 표기(통신 매체의 종류) | 케이블 종류       |
| ------------------- | ------------ |
| C                   | 동축 케이블       |
| T                   | 트위스티드 페어 케이블 |
| S                   | 단파장 광섬유 케이블  |
| L                   | 장파장 광섬유 케이블  |
- 10BASE-T 케이블: 10Mbps 속도를 지원하는 트위스티드 페어 케이블
- 1000BASE-SX 케이블: 1000Mbps 속도를 지원하는 단파장 광섬유 케이블
- 1000BASE-LX 케이블: 1000Mbps 속도를 지원하는 장파장 광섬유 케이블

## 1.4 이더넷 프레임(Ethernet Frame)
- 데이터 링크 계층의 이더넷 프레임도 물리 계층의 이더넷 표준과 마찬가지로 형식이 정해져있다.
- 이더넷 프레임은 상위 계층으로부터 받아들인 정보에 헤더와 트레일러는 추가하는 **캡슐화**과정을 통해 만들어진다.
- 수신지 입장에서는 프레임의 헤더와 트레일러를 제거한 뒤 상위 계층으로 올려보내는 **역캡슐화** 과정을 거친다.
- 이더넷 프레임 헤더는 기본적으로 프리앰블, 수신지 MAC 주소, 송신지 MAC 주소, 타입/길이로 구성되며, 페이로드는 데이터, 트레일러는 FCS로 구성된다.

### 1.4.1 프리앰블(preamble)
- 이더넷 프레임의 시작을 알리는 8바이트 크기의 정보이다.
- 수신지는 프리앰블을 통해 이더넷 프레임이 오고 있음을 알아차린다.
	- 송수신지 간의 동기화를 위해 사용되는 정보이다.

### 1.4.2 수신지 MAC 주소와 송신지 MAC 주소
- **MAC 주소**는 물리적 주소라고도 불린다.
- 네트워크 인터페이스마다 부여되는 6바이트 길이의 주소로, LAN 내의 수신지와 송신지를 특정할 수 있다.
- 일반적으로 MAC 주소는 고유하고 변경되지 않는 주소로써 네트워크 인터페이스마다 부여된다.
	- NIC (Network Interface Controller)라는 장치가 네트워크 인터페이스 역할을 담당한다.
	- NIC가 여러개면 MAC 주소도 여러 개 있을 수 있다.
- MAC 주소는 변경이 가능한 경우도 많고 고유하지 않을 수 있다.
	- 다만 일반적이지는 않다.
- 윈도우에서는 CMD를 열고 `getmac /v` 혹은 `ipconfig /all`을 입력해서 알 수 있다.
- 맥OS나 리눅스에서는 터미널을 열고 `ifconfig`을 입력해서 알 수 있다.

### 1.4.3 타입/길이
- 타입(type) 혹은 길이(length)가 올 수 있다.
	- 필드에 명시된 크기가 1500(16진수 05DC) 이하일 경우, 프레임의 크기를 나타내는 데 사용되고, 1536(16진수 0600)이상일 경우에는 타입을 나타내는 데 사용된다.
- 타입은 이더넷 프레임이 '어떤 정보를 캡슐화했는지지를 나타내는 정보이다.
	- 이더타입(ethertype) 이라고 부르기도 한다.

### 1.4.4 데이터
- 데이터는 상위 계층에서 전달받거나 상위 계층으로 전달해야 할 내용이다.
	- 네트워크 계층의 데이터+헤더인 PDU가 이곳에 포함된다.
- 최대 크기는 1500바이트인데, 반드시 일정 크기(46바이트 이상)이여야 한다.
	- 그 이하라면 크기를 맞추기 위해 패딩(padding)이라는 정보가 채워진다.
	- 보통 46바이트가 될 때 까지 0이 채워진다.

### 1.4.5 FCS (Frame Check Sequence)
- 수신한 이더넷 프레임에 오류가 있는지 확인하기 위한 필드이다.
	- 여기서 오류 검출이 이루어진다.
- 이 필드에는 CRC (Cycle Redundancy Check)라는 순환 중복 검사라고 불리는 오류 검출용 값이 들어간다.
	- 송신지가 프리앰블을 제외한 나머지 필드 값들을 바탕으로 CRC 값을 계산한 후, 해당 값을 FCS 필드에 명시한다.
	- 수신자는 수신한 프레임에서 프리앰블과 FCS 필드를 제외한 나머지 필드 값을 바탕으로 CRC 값을 계산한 뒤, FCS 필드 값과 비교한다.
	- 비교 값이 일치하지 않으면 프레임에 오류가 있다고 판단하여 해당 프레임을 폐기한다.